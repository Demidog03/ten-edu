<section class="section" *ngIf="center() as c">
  <div class="container">
    <div class="section__header">
      <h2>{{ c.name }}</h2>
      <button pButton class="p-button-text" icon="pi pi-arrow-left" label="Назад" (click)="back()"></button>
    </div>
    <p class="muted">{{ c.city }} • Программ: {{ c.programs }}</p>

    <h3>Программы</h3>

    <div class="prog-grid">
      <p-card
        *ngFor="let p of programs()"
        class="prog-card card--hover"
        (click)="openProgram(p.id)"
        [style]="{'cursor':'pointer'}"
        [attr.aria-label]="'Открыть «' + p.title + '»'"
      >
        <!-- Обложка -->
        <ng-template pTemplate="header">
          <div class="thumb">
            <img
              [src]="picSum(p.image ?? ('prog' + p.id), 900, 420, 1)"
              [srcset]="
            picSum(p.image ?? ('prog' + p.id), 900, 420, 1)   + ' 900w, '  +
            picSum(p.image ?? ('prog' + p.id), 1200, 560, 1) + ' 1200w, ' +
            picSum(p.image ?? ('prog' + p.id), 1600, 720, 1) + ' 1600w, ' +
            picSum(p.image ?? ('prog' + p.id), 1200, 560, 2) + ' 2400w'
          "
              sizes="(min-width: 960px) 33vw, 100vw"
              alt=""
              decoding="async"
              loading="lazy"
            />
          </div>
        </ng-template>

        <!-- Тело -->
        <div class="card__body">
          <div class="tags">
            <p-tag *ngIf="p.level" [value]="p.level" severity="success"></p-tag>
            <p-tag *ngIf="p.mode"  [value]="p.mode"  severity="info"></p-tag>
          </div>
          <div class="title">{{ p.title }}</div>
          <div class="meta">
            <span><i class="pi pi-user"></i>{{ p.lecturer }}</span>
            <span *ngIf="p.durationHours"><i class="pi pi-clock"></i>{{ p.durationHours }} ч</span>
          </div>
        </div>

        <!-- Футер -->
        <ng-template pTemplate="footer">
          <div class="card__footer">
            <span class="price">{{ p.price | currency:'KZT':'symbol-narrow':'1.0-0' }}</span>
            <button
              pButton
              icon="pi pi-angle-right"
              class="p-button-text"
              aria-label="Подробнее"
              (click)="$event.stopPropagation(); openProgram(p.id)"
            ></button>
          </div>
        </ng-template>
      </p-card>
    </div>

  </div>
</section>
