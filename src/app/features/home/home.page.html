<section class="hero" aria-labelledby="hero-title">
  <div class="container hero__grid">
    <div class="hero__content">
      <h1 id="hero-title">Vista Expert — агрегатор учебных центров</h1>
      <p>Находите программы обучения, лекторов и учебные центры. Подавайте заявки и получайте консультации.</p>

      <div class="hero__actions" role="search">
        <span class="sr-only" id="search-hint">Введите запрос и нажмите Enter</span>
        <p-inputGroup>
          <input pInputText [(ngModel)]="queryValue" (keyup.enter)="goPrograms()"
                 placeholder="Поиск программ и центров" aria-describedby="search-hint" />
          <button pButton label="Искать" icon="pi pi-search" (click)="goPrograms()"></button>
        </p-inputGroup>
      </div>

      <div class="hero__cta">
        <button pButton label="Все центры" (click)="goCenters()" class="p-button-outlined"></button>
        <button pButton label="Все программы" (click)="goPrograms()"></button>
        <button pButton label="Войти / Регистрация" class="p-button-text" (click)="goPrograms()"></button>
      </div>

      <div class="hero__quick">
        <span class="muted">Популярные города:</span>
        <div class="chips">
          <p-chip label="Астана" (click)="filterByCity?.('Астана')"></p-chip>
          <p-chip label="Алматы" (click)="filterByCity?.('Алматы')"></p-chip>
          <p-chip label="Шымкент" (click)="filterByCity?.('Шымкент')"></p-chip>
        </div>
      </div>
    </div>

    <div class="hero__media " aria-hidden="true">
      <div class="hero__card">
        <i class="pi pi-graduation-cap"></i>
        <div>
          <div class="hero__card-title">Обучение</div>
          <div class="muted">Курсы и повышения квалификации</div>
        </div>
      </div>
      <div class="hero__card">
        <i class="pi pi-users"></i>
        <div>
          <div class="hero__card-title">Лекторы</div>
          <div class="muted">Приглашенные эксперты</div>
        </div>
      </div>
      <div class="hero__card">
        <i class="pi pi-send"></i>
        <div>
          <div class="hero__card-title">Заявки</div>
          <div class="muted">Быстрая консультация</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Цифры / доверие -->
<section class="stats" aria-label="Статистика платформы">
  <div class="container stats__grid">
    <p-card class="stat"><ng-template pTemplate="content"><div class="stat__value">50+</div><div class="stat__label">учебных центров</div></ng-template></p-card>
    <p-card class="stat"><ng-template pTemplate="content"><div class="stat__value">200+</div><div class="stat__label">программ</div></ng-template></p-card>
    <p-card class="stat"><ng-template pTemplate="content"><div class="stat__value">1000+</div><div class="stat__label">слушателей</div></ng-template></p-card>
  </div>
</section>

<!-- Новости -->
<section class="section" aria-labelledby="news-title">
  <div class="container">
    <div class="section__header">
      <h2 id="news-title">Новости</h2>
      <button pButton label="Все новости" class="p-button-text"></button>
    </div>

    <p-carousel [value]="news()" [numVisible]="3" [numScroll]="3" [circular]="false" [responsiveOptions]="responsive">

    <ng-template pTemplate="item" let-n >
        <a  class="news-card card--hover" (click)="goToNews()">
          <div class="news-media">
            <img [src]="n.image" [alt]="n.title" loading="lazy" />
            <span class="news-tag">{{ n.tag }}</span>
          </div>
          <div class="news-body">
            <div class="news-title">{{ n.title }}</div>
            <p class="news-excerpt muted">{{ n.excerpt }}</p>
            <div class="news-meta">
              <i class="pi pi-calendar"></i>
              <span>{{ n.date | date:'d MMMM' }}</span>
            </div>
          </div>
        </a>
      </ng-template>
    </p-carousel>
  </div>
</section>


<!-- Топ центров -->
<section class="section" aria-labelledby="centers-title">
  <div class="container">
    <div class="section__header">
      <h2 id="centers-title">Учебные центры</h2>
      <button pButton label="Смотреть все" class="p-button-text" (click)="goCenters()"></button>
    </div>

    <div class="cards">
      <ng-container *ngIf="!loading(); else centersSkeleton">
        <p-card *ngFor="let c of centers().slice(0, 6)"
                class="card card--hover"
                (click)="openCenter(c.id)"
                [style]="{'cursor':'pointer'}">

          <ng-template pTemplate="header">
            <!-- Фото центра -->
            <a class="card__media" [attr.aria-label]="c.name">
              <img [src]="c.image"
                   [alt]="'Фото: ' + c.name"
                   loading="lazy"
                   (error)="imgFallback($event)" />
            </a>

            <div class="card__header">
              <span class="card__title">{{ c.name }}</span>
              <p-tag [value]="c.city" severity="success"></p-tag>
            </div>
          </ng-template>

          <div class="card__body">
            <p class="muted">Программ: {{ c.programs }}</p>
          </div>
        </p-card>
      </ng-container>

      <ng-template #centersSkeleton>
        <p-skeleton width="100%" height="220px" class="skeleton" *ngFor="let _ of [1,2,3]"></p-skeleton>
      </ng-template>
    </div>
  </div>
</section>

<!-- Топ программ -->
<section class="section" aria-labelledby="programs-title">
  <div class="container">
    <div class="section__header">
      <h2 id="programs-title">Популярные программы</h2>
      <button pButton label="Смотреть все" class="p-button-text" (click)="goPrograms()"></button>
    </div>

    <div class="cards">
      <p-card *ngFor="let p of data.filteredPrograms().slice(0, 6)" class="card card--hover"
              (click)="openProgram(p.id)" [style]="{'cursor':'pointer'}">

        <ng-template pTemplate="header">
          <div class="card__cover" *ngIf="p.image">
            <img [src]="p.image" alt="" />
            <div class="cover-badges">
              <p-tag [value]="p.mode" severity="info"></p-tag>
              <p-tag [value]="p.level" severity="success"></p-tag>
            </div>
          </div>
        </ng-template>

        <div class="card__body">
          <div class="card__title">{{ p.title }}</div>
          <div class="muted">Центр: {{ p.center }} • Лектор: {{ p.lecturer }}</div>
          <div class="meta">
            <span><i class="pi pi-clock"></i> {{ p.durationHours }} ч</span>
            <span><i class="pi pi-calendar"></i> {{ p.start | date:'d MMM' }}</span>
            <span><i class="pi pi-star-fill"></i> {{ p.rating }}</span>
            <span><i class="pi pi-check-circle"></i> {{ p.certificate ? 'Сертификат' : 'Без сертификата' }}</span>
          </div>
        </div>

        <ng-template pTemplate="footer">
          <div class="card__footer">
            <span class="muted">{{ p.enrolled }}/{{ p.seats }} мест</span>
            <span class="price">{{ p.price | currency:'KZT':'symbol-narrow':'1.0-0' }}</span>
          </div>
        </ng-template>
      </p-card>

    </div>
  </div>
</section>

<!-- Лекторы -->
<section class="section" aria-labelledby="lecturers-title">
  <div class="container">
    <div class="section__header">
      <h2 id="lecturers-title">Лекторы</h2>
      <button pButton label="Смотреть всех" class="p-button-text" (click)="goLecturers()"></button>
    </div>


    <div class="lecturers">
      <div class="lecturer card--hover" *ngFor="let l of lecturers().slice(0, 9)">
        <p-avatar
          [image]="l.avatar"
          shape="circle"
          size="large"
          class="avatar-ring"
          (onImageError)="l.avatar = ''"></p-avatar>

        <div class="lecturer__info">
          <div class="name">{{ l.name }}</div>
          <div class="muted">{{ l.role }}</div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- Почему TenEdu -->
<section class="benefits" aria-label="Преимущества платформы">
  <div class="container benefits__grid">
    <p-card class="benefit card--hover">
      <ng-template pTemplate="header"><i class="pi pi-filter"></i></ng-template>
      <ng-template pTemplate="content"><h3>Умный поиск</h3><p class="muted">Фильтры по городам, цене, длительности, центрам и лекторам.</p></ng-template>
    </p-card>
    <p-card class="benefit card--hover">
      <ng-template pTemplate="header"><i class="pi pi-comments"></i></ng-template>
      <ng-template pTemplate="content"><h3>Отзывы и вопросы</h3><p class="muted">Обратная связь с администраторами центров.</p></ng-template>
    </p-card>
    <p-card class="benefit card--hover">
      <ng-template pTemplate="header"><i class="pi pi-lock"></i></ng-template>
      <ng-template pTemplate="content"><h3>Личные кабинеты</h3><p class="muted">Для пользователей и центров — безопасно и удобно.</p></ng-template>
    </p-card>
  </div>
</section>

<!-- Контакты / Интеграции -->
<section class="contacts" aria-labelledby="contacts-title">
  <div class="container">
    <h2 id="contacts-title" class="sr-only">Контакты</h2>
    <p>Есть вопросы? Свяжитесь с администратором платформы или напишите нам в мессенджеры.</p>
    <div class="contacts__actions">
      <a pButton href="mailto:admin@vista.expert.kz" label="Email администратора" icon="pi pi-at"></a>
      <a pButton href="#" label="Telegram" class="p-button-outlined" icon="pi pi-telegram"></a>
      <a pButton href="#" label="WhatsApp" class="p-button-outlined" icon="pi pi-whatsapp"></a>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta" aria-label="Присоединиться">
  <div class="container cta__inner">
    <div>
      <h2>Готовы обучать или учиться?</h2>
      <p class="muted">Разместите учебный центр или найдите программу, которая вам подходит.</p>
    </div>
    <div class="cta__buttons">
      <button pButton label="Разместить центр" icon="pi pi-building" class="p-button-success p-button-rounded" (click)="goCenters()"></button>
      <button pButton label="Найти программу" icon="pi pi-search" class="p-button-rounded" (click)="goPrograms()"></button>
    </div>
  </div>
</section>

